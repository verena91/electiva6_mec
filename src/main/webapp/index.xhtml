<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	template="/template/main.xhtml">

	<ui:define name="body">
		<p:panel header="Transformar a CSV">
			<h:outputText
				value="Puede transformar el pdf de la planilla de funcionarios administrativos del MEC seleccionando el archivo haciendo clic luego en Procesar Archivo. Al finalizar el procesamiento puede descargar el archivo haciendo clic en Descargar CSV." />
			<br />
			<br />
			<h:form enctype="multipart/form-data">
				<p:messages showDetail="true" />

				<table width="100%">
					<tr>
						<td align="center"><p:fileUpload value="#{pdfMB.file}"
								mode="simple" sizeLimit="1000000" allowTypes="/(\.|\/)(pdf)$/" />
							<p:commandButton value="Procesar Archivo" ajax="false"
								actionListener="#{pdfMB.upload}" /></td>
					</tr>
				</table>
			</h:form>
			<h:form prependId="aa">
				<table width="100%">
					<tr>
						<td align="center"><p:commandButton value="Descargar CSV"
								ajax="false" actionListener="#{pdfMB.descargar}"
								disabled="#{pdfMB.disable}">
								<p:fileDownload value="#{pdfMB.downFile}" />
							</p:commandButton></td>
					</tr>
				</table>
			</h:form>
		</p:panel>
		<p:panel header="Buscador">
			<h:form>
				<p:panelGrid columns="3">
					<h:outputText value="Nombre:" />
					<h:inputText value="#{funcionarioMB.nombre}"></h:inputText>
					<p:commandButton value="Buscar por nombre"
						actionListener="#{funcionarioMB.buscarPorNombre}" update="result"></p:commandButton>
					<h:outputText value="CI:" />
					<h:inputText value="#{funcionarioMB.ci}"></h:inputText>
					<p:commandButton value="Buscar por CI"
						actionListener="#{funcionarioMB.buscarPorCedula}" update="result"></p:commandButton>
				</p:panelGrid>
				<h:outputText value="Primeros 20 resultados." />
				<p:dataTable value="#{funcionarioMB.resultados}" var="bean"
					id="result" rows="20">
					<p:column headerText="Nombre">
						<h:outputText value="#{bean.nombreCompleto}" />
					</p:column>
					<p:column headerText="CI">
						<h:outputText value="#{bean.nroDocumento}" />
					</p:column>
					<p:column headerText="Mes-AÃ±o">
						<h:outputText value="#{bean.mes}-#{bean.anho}" />
					</p:column>
					<p:column headerText="Dependencia">
						<h:outputText value="#{bean.dependencia}" />
					</p:column>
					<p:column headerText="Cargo">
						<h:outputText value="#{bean.cargo}" />
					</p:column>
					<p:column headerText="Objeto de gasto">
						<h:outputText value="#{bean.nombreObjetoGasto}" />
					</p:column>
					<p:column headerText="Salario" style="text-align:right">
						<h:outputText value="#{bean.salario}">
							<f:convertNumber maxFractionDigits="1" />
						</h:outputText>
					</p:column>
					
				</p:dataTable>
			</h:form>
		</p:panel>


		<p:panel header="Resumen de datos">
			<p:panelGrid columns="2">
				<f:facet name="header">
					<h:outputText value="Maximos pagos por conceptos" />
				</f:facet>

				<p:dataTable var="bean" value="#{datosMB.conceptos}">
					<p:column>
						<h:outputText value="#{bean.concepto}" />
					</p:column>
					<p:column style="text-align:right">
						<h:outputText value="#{bean.monto}">
							<f:convertNumber maxFractionDigits="1" />
						</h:outputText>
					</p:column>
				</p:dataTable>
			</p:panelGrid>
		</p:panel>

	</ui:define>

</ui:composition>